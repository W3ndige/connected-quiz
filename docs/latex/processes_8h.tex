\hypertarget{processes_8h}{}\section{src/server/processes.h File Reference}
\label{processes_8h}\index{src/server/processes.\+h@{src/server/processes.\+h}}


File contains functions in interaction between processes.  


{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include $<$signal.\+h$>$}\newline
{\ttfamily \#include \char`\"{}game.\+h\char`\"{}}\newline
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structuser__score}{user\+\_\+score}}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{processes_8h_a86a42328baad695d8c30bf05e9d8312e}{reset\+Score\+Table}} (struct \mbox{\hyperlink{structuser__score}{user\+\_\+score}} score\+\_\+table\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Places the user score in the proper place of the score\+\_\+table and prints scoreboard. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{processes_8h_a743636cbb8a17041053f2eed7d043ae1}{update\+Score\+Table}} (struct \mbox{\hyperlink{structuser__score}{user\+\_\+score}} score\+\_\+table\mbox{[}$\,$\mbox{]}, int client\+\_\+pid, int points)
\begin{DoxyCompactList}\small\item\em Places the user score in the proper place of the score\+\_\+table and prints scoreboard. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{processes_8h_abb59927213e4333ca5998cf2c46fc5e5}{send\+To\+Process\+And\+Verify}} (int $\ast$pipefd\+\_\+to\+\_\+child, int $\ast$pipefd\+\_\+to\+\_\+parent, char $\ast$message)
\begin{DoxyCompactList}\small\item\em Send to process and verify if the information was received. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{processes_8h_a91def4abb81d30f2b5a2f4672362ca5d}{read\+From\+Process\+And\+Verify}} (int $\ast$pipefd\+\_\+to\+\_\+child, int $\ast$pipefd\+\_\+to\+\_\+parent, char $\ast$message, int message\+\_\+size)
\begin{DoxyCompactList}\small\item\em Read data sent from another process and send confirmation. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{processes_8h_abe43ba856c2f0dfd402a41022cd3f492}{handle\+Child\+Process}} (int socket\+\_\+fd, socklen\+\_\+t socket\+\_\+size, struct sockaddr\+\_\+in destination, int num\+\_\+of\+\_\+categories, int $\ast$pipefd\+\_\+to\+\_\+child, int $\ast$pipefd\+\_\+to\+\_\+parent, struct \mbox{\hyperlink{structquestion__info}{question\+\_\+info}} questions\mbox{[}$\,$\mbox{]}, int total\+\_\+number\+\_\+of\+\_\+questions)
\begin{DoxyCompactList}\small\item\em Accept a new connection, ask question using ask\+Random\+Question, points are then sent together with P\+ID to the parent process using pipe. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{processes_8h_aa71b51e18ca7b84212b4cce1ffc8c9e4}{handle\+Parent\+Process}} (struct \mbox{\hyperlink{structuser__score}{user\+\_\+score}} score\+\_\+table\mbox{[}$\,$\mbox{]}, int $\ast$pipefd\+\_\+to\+\_\+child, int $\ast$pipefd\+\_\+to\+\_\+parent)
\begin{DoxyCompactList}\small\item\em Reads message from child sent over the pipe, updates the score table according to it. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{processes_8h_a7d01e62c92c0266931d3a5bbeab3fe1c}{handle\+Client\+Connection}} (int socket\+\_\+fd, socklen\+\_\+t socket\+\_\+size, struct sockaddr\+\_\+in destination, int num\+\_\+of\+\_\+categories, struct \mbox{\hyperlink{structquestion__info}{question\+\_\+info}} $\ast$questions, int total\+\_\+number\+\_\+of\+\_\+questions)
\begin{DoxyCompactList}\small\item\em Create the pipe, and forks according to global variable M\+A\+X\+\_\+\+N\+U\+M\+B\+E\+R\+\_\+\+O\+F\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+NS. Then handle\+Child\+Process and handle\+Parent\+Process are being called. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
File contains functions in interaction between processes. 

\begin{DoxyAuthor}{Author}
W3ndige 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
29 May 2018 
\end{DoxyDate}


\subsection{Function Documentation}
\mbox{\Hypertarget{processes_8h_abe43ba856c2f0dfd402a41022cd3f492}\label{processes_8h_abe43ba856c2f0dfd402a41022cd3f492}} 
\index{processes.\+h@{processes.\+h}!handle\+Child\+Process@{handle\+Child\+Process}}
\index{handle\+Child\+Process@{handle\+Child\+Process}!processes.\+h@{processes.\+h}}
\subsubsection{\texorpdfstring{handle\+Child\+Process()}{handleChildProcess()}}
{\footnotesize\ttfamily void handle\+Child\+Process (\begin{DoxyParamCaption}\item[{int}]{socket\+\_\+fd,  }\item[{socklen\+\_\+t}]{socket\+\_\+size,  }\item[{struct sockaddr\+\_\+in}]{destination,  }\item[{int}]{num\+\_\+of\+\_\+categories,  }\item[{int $\ast$}]{pipefd\+\_\+to\+\_\+child,  }\item[{int $\ast$}]{pipefd\+\_\+to\+\_\+parent,  }\item[{struct \mbox{\hyperlink{structquestion__info}{question\+\_\+info}}}]{questions\mbox{[}$\,$\mbox{]},  }\item[{int}]{total\+\_\+number\+\_\+of\+\_\+questions }\end{DoxyParamCaption})}



Accept a new connection, ask question using ask\+Random\+Question, points are then sent together with P\+ID to the parent process using pipe. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em socket\+\_\+fd} & file descriptor for the open socket. \\
\hline
\mbox{\tt in}  & {\em socket\+\_\+size} & size of the socket. \\
\hline
\mbox{\tt in}  & {\em destination} & structure that contains information about client. \\
\hline
\mbox{\tt in}  & {\em num\+\_\+of\+\_\+categories} & number of categories. \\
\hline
\mbox{\tt in}  & {\em pipefd} & array containing pipe file descriptors. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{processes_8h_a7d01e62c92c0266931d3a5bbeab3fe1c}\label{processes_8h_a7d01e62c92c0266931d3a5bbeab3fe1c}} 
\index{processes.\+h@{processes.\+h}!handle\+Client\+Connection@{handle\+Client\+Connection}}
\index{handle\+Client\+Connection@{handle\+Client\+Connection}!processes.\+h@{processes.\+h}}
\subsubsection{\texorpdfstring{handle\+Client\+Connection()}{handleClientConnection()}}
{\footnotesize\ttfamily void handle\+Client\+Connection (\begin{DoxyParamCaption}\item[{int}]{socket\+\_\+fd,  }\item[{socklen\+\_\+t}]{socket\+\_\+size,  }\item[{struct sockaddr\+\_\+in}]{destination,  }\item[{int}]{num\+\_\+of\+\_\+categories,  }\item[{struct \mbox{\hyperlink{structquestion__info}{question\+\_\+info}} $\ast$}]{questions,  }\item[{int}]{total\+\_\+number\+\_\+of\+\_\+questions }\end{DoxyParamCaption})}



Create the pipe, and forks according to global variable M\+A\+X\+\_\+\+N\+U\+M\+B\+E\+R\+\_\+\+O\+F\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+NS. Then handle\+Child\+Process and handle\+Parent\+Process are being called. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em socket\+\_\+fd} & file descriptor for the open socket. \\
\hline
\mbox{\tt in}  & {\em socket\+\_\+size} & size of the socket. \\
\hline
\mbox{\tt in}  & {\em destination} & structure that contains information about client. \\
\hline
\mbox{\tt in}  & {\em num\+\_\+of\+\_\+categories} & number of categories. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{processes_8h_aa71b51e18ca7b84212b4cce1ffc8c9e4}\label{processes_8h_aa71b51e18ca7b84212b4cce1ffc8c9e4}} 
\index{processes.\+h@{processes.\+h}!handle\+Parent\+Process@{handle\+Parent\+Process}}
\index{handle\+Parent\+Process@{handle\+Parent\+Process}!processes.\+h@{processes.\+h}}
\subsubsection{\texorpdfstring{handle\+Parent\+Process()}{handleParentProcess()}}
{\footnotesize\ttfamily void handle\+Parent\+Process (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structuser__score}{user\+\_\+score}}}]{score\+\_\+table\mbox{[}$\,$\mbox{]},  }\item[{int $\ast$}]{pipefd\+\_\+to\+\_\+child,  }\item[{int $\ast$}]{pipefd\+\_\+to\+\_\+parent }\end{DoxyParamCaption})}



Reads message from child sent over the pipe, updates the score table according to it. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em score\+\_\+table} & array of \mbox{\hyperlink{structuser__score}{user\+\_\+score}} structures containing pid of user and score. \\
\hline
\mbox{\tt in}  & {\em pipefd} & array containing pipe file descriptors. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{processes_8h_a91def4abb81d30f2b5a2f4672362ca5d}\label{processes_8h_a91def4abb81d30f2b5a2f4672362ca5d}} 
\index{processes.\+h@{processes.\+h}!read\+From\+Process\+And\+Verify@{read\+From\+Process\+And\+Verify}}
\index{read\+From\+Process\+And\+Verify@{read\+From\+Process\+And\+Verify}!processes.\+h@{processes.\+h}}
\subsubsection{\texorpdfstring{read\+From\+Process\+And\+Verify()}{readFromProcessAndVerify()}}
{\footnotesize\ttfamily void read\+From\+Process\+And\+Verify (\begin{DoxyParamCaption}\item[{int $\ast$}]{pipefd\+\_\+to\+\_\+child,  }\item[{int $\ast$}]{pipefd\+\_\+to\+\_\+parent,  }\item[{char $\ast$}]{message,  }\item[{int}]{message\+\_\+size }\end{DoxyParamCaption})}



Read data sent from another process and send confirmation. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em pipefd\+\_\+to\+\_\+child} & array of \mbox{\hyperlink{structuser__score}{user\+\_\+score}} structures containing pid of user and score. \\
\hline
\mbox{\tt in}  & {\em pipefd\+\_\+to\+\_\+parent} & P\+ID of the client that score is about to be placed. \\
\hline
\mbox{\tt out}  & {\em message} & number of points to be put. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{processes_8h_a86a42328baad695d8c30bf05e9d8312e}\label{processes_8h_a86a42328baad695d8c30bf05e9d8312e}} 
\index{processes.\+h@{processes.\+h}!reset\+Score\+Table@{reset\+Score\+Table}}
\index{reset\+Score\+Table@{reset\+Score\+Table}!processes.\+h@{processes.\+h}}
\subsubsection{\texorpdfstring{reset\+Score\+Table()}{resetScoreTable()}}
{\footnotesize\ttfamily void reset\+Score\+Table (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structuser__score}{user\+\_\+score}}}]{score\+\_\+table\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}



Places the user score in the proper place of the score\+\_\+table and prints scoreboard. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em score\+\_\+table} & array of \mbox{\hyperlink{structuser__score}{user\+\_\+score}} structures containing pid of user and score. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{processes_8h_abb59927213e4333ca5998cf2c46fc5e5}\label{processes_8h_abb59927213e4333ca5998cf2c46fc5e5}} 
\index{processes.\+h@{processes.\+h}!send\+To\+Process\+And\+Verify@{send\+To\+Process\+And\+Verify}}
\index{send\+To\+Process\+And\+Verify@{send\+To\+Process\+And\+Verify}!processes.\+h@{processes.\+h}}
\subsubsection{\texorpdfstring{send\+To\+Process\+And\+Verify()}{sendToProcessAndVerify()}}
{\footnotesize\ttfamily int send\+To\+Process\+And\+Verify (\begin{DoxyParamCaption}\item[{int $\ast$}]{pipefd\+\_\+to\+\_\+child,  }\item[{int $\ast$}]{pipefd\+\_\+to\+\_\+parent,  }\item[{char $\ast$}]{message }\end{DoxyParamCaption})}



Send to process and verify if the information was received. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em pipefd\+\_\+to\+\_\+child} & array of \mbox{\hyperlink{structuser__score}{user\+\_\+score}} structures containing pid of user and score. \\
\hline
\mbox{\tt in}  & {\em pipefd\+\_\+to\+\_\+parent} & P\+ID of the client that score is about to be placed. \\
\hline
\mbox{\tt in}  & {\em message} & number of points to be put. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns 0 on error or 1 on success. 
\end{DoxyReturn}
\mbox{\Hypertarget{processes_8h_a743636cbb8a17041053f2eed7d043ae1}\label{processes_8h_a743636cbb8a17041053f2eed7d043ae1}} 
\index{processes.\+h@{processes.\+h}!update\+Score\+Table@{update\+Score\+Table}}
\index{update\+Score\+Table@{update\+Score\+Table}!processes.\+h@{processes.\+h}}
\subsubsection{\texorpdfstring{update\+Score\+Table()}{updateScoreTable()}}
{\footnotesize\ttfamily void update\+Score\+Table (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structuser__score}{user\+\_\+score}}}]{score\+\_\+table\mbox{[}$\,$\mbox{]},  }\item[{int}]{client\+\_\+pid,  }\item[{int}]{points }\end{DoxyParamCaption})}



Places the user score in the proper place of the score\+\_\+table and prints scoreboard. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em score\+\_\+table} & array of \mbox{\hyperlink{structuser__score}{user\+\_\+score}} structures containing pid of user and score. \\
\hline
\mbox{\tt in}  & {\em client\+\_\+pid} & P\+ID of the client that score is about to be placed. \\
\hline
\mbox{\tt in}  & {\em points} & number of points to be put. \\
\hline
\end{DoxyParams}
